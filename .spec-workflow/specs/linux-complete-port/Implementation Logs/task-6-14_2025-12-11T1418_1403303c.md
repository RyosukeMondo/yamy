# Implementation Log: Task 6.14

**Summary:** Implemented crash reporting infrastructure with signal handlers for SIGSEGV, SIGABRT, SIGFPE, SIGILL, SIGBUS. Uses async-signal-safe functions only in signal handler. Generates crash reports with backtrace and saves to ~/.local/share/yamy/crashes/. Also fixed pre-existing Linux build issues.

**Timestamp:** 2025-12-11T14:18:59.978Z
**Log ID:** 1403303c-cf3f-4a57-9eb3-863fde81670e

---

## Statistics

- **Lines Added:** +543
- **Lines Removed:** -1
- **Files Changed:** 5
- **Net Change:** 542

## Files Modified
- src/app/main_qt.cpp
- CMakeLists.txt
- src/ui/qt/CMakeLists.txt

## Files Created
- src/utils/crash_handler.h
- src/utils/crash_handler.cpp

---

## Artifacts

### Functions

#### CrashHandler::install
- **Purpose:** Install signal handlers for crash signals (SIGSEGV, SIGABRT, SIGFPE, SIGILL, SIGBUS)
- **Location:** src/utils/crash_handler.cpp:195
- **Signature:** static void install()
- **Exported:** Yes

#### CrashHandler::signalHandler
- **Purpose:** Async-signal-safe signal handler that writes crash report and chains to original handler
- **Location:** src/utils/crash_handler.cpp:248
- **Signature:** static void signalHandler(int sig, siginfo_t* info, void* context)
- **Exported:** No

#### CrashHandler::writeCrashReport
- **Purpose:** Generate crash report file with signal info, backtrace, version, and config using async-signal-safe operations
- **Location:** src/utils/crash_handler.cpp:268
- **Signature:** static void writeCrashReport(int sig, siginfo_t* info, void* context)
- **Exported:** No

### Classes

#### CrashHandler
- **Purpose:** Static crash handler class that catches fatal signals and generates crash reports with backtraces
- **Location:** src/utils/crash_handler.h:27
- **Methods:** install(), uninstall(), setVersion(), setConfigPath(), getCrashDir(), hasCrashReports(), getCrashReports(), deleteCrashReport(), deleteAllCrashReports()
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** CrashHandler installed at application startup in main() before Qt initialization
- **Frontend Component:** main_qt.cpp
- **Backend Endpoint:** N/A
- **Data Flow:** main() -> CrashHandler::install() -> signal handlers registered -> on crash: signalHandler() -> writeCrashReport() -> chain to original handler/SIG_DFL

