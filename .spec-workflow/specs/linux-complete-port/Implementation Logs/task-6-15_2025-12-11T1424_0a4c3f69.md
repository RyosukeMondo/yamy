# Implementation Log: Task 6.15

**Summary:** Implemented crash report dialog on startup. Created CrashReportDialog that appears when crash reports are detected, with options to view full report, report bug on GitHub, or dismiss. Includes CrashReportViewerDialog for viewing full reports, GitHub integration with pre-filled issue templates, privacy protection (home paths sanitized), and a "Don't show again" option stored in QSettings.

**Timestamp:** 2025-12-11T14:24:14.046Z
**Log ID:** 0a4c3f69-0799-4efb-8627-e3028b7d714f

---

## Statistics

- **Lines Added:** +659
- **Lines Removed:** -0
- **Files Changed:** 4
- **Net Change:** 659

## Files Modified
- src/app/main_qt.cpp
- src/ui/qt/CMakeLists.txt

## Files Created
- src/ui/qt/crash_report_dialog.h
- src/ui/qt/crash_report_dialog.cpp

---

## Artifacts

### Components

#### CrashReportDialog
- **Type:** Qt QDialog
- **Purpose:** Main notification dialog shown on startup when crash reports exist, with view/report/dismiss options
- **Location:** src/ui/qt/crash_report_dialog.h:29
- **Props:** std::vector<std::string> crashReports, QWidget* parent
- **Exports:** CrashReportDialog

#### CrashReportViewerDialog
- **Type:** Qt QDialog
- **Purpose:** Full crash report viewer dialog with scrollable text, report bug and delete options
- **Location:** src/ui/qt/crash_report_dialog.h:85
- **Props:** std::string reportPath, QWidget* parent
- **Exports:** CrashReportViewerDialog

### Functions

#### CrashReportDialog::shouldShowCrashDialog
- **Purpose:** Check if crash dialog should be shown (has reports and not disabled)
- **Location:** src/ui/qt/crash_report_dialog.cpp:68
- **Signature:** static bool shouldShowCrashDialog()
- **Exported:** Yes

#### CrashReportDialog::setDontShowAgain
- **Purpose:** Save 'don't show again' preference to QSettings
- **Location:** src/ui/qt/crash_report_dialog.cpp:74
- **Signature:** static void setDontShowAgain(bool value)
- **Exported:** Yes

#### CrashReportDialog::getDontShowAgain
- **Purpose:** Get 'don't show again' preference from QSettings
- **Location:** src/ui/qt/crash_report_dialog.cpp:79
- **Signature:** static bool getDontShowAgain()
- **Exported:** Yes

#### CrashReportDialog::sanitizeReportForGitHub
- **Purpose:** Remove sensitive info (home paths) from crash reports before GitHub submission
- **Location:** src/ui/qt/crash_report_dialog.cpp:133
- **Signature:** QString sanitizeReportForGitHub(const QString& report)
- **Exported:** No

#### CrashReportDialog::buildGitHubIssueUrl
- **Purpose:** Build pre-filled GitHub issue URL with crash report template
- **Location:** src/ui/qt/crash_report_dialog.cpp:148
- **Signature:** QString buildGitHubIssueUrl(const QString& report)
- **Exported:** No

### Integrations

#### Integration
- **Description:** main_qt.cpp checks for crash reports on startup using CrashReportDialog::shouldShowCrashDialog() and shows dialog
- **Frontend Component:** main_qt.cpp startup
- **Backend Endpoint:** CrashHandler::getCrashReports()
- **Data Flow:** App start → Check shouldShowCrashDialog() → Get crash reports → Show CrashReportDialog → User action (view/report/dismiss) → Optional CrashReportViewerDialog

#### Integration
- **Description:** GitHub bug report integration opens browser with pre-filled issue template
- **Frontend Component:** CrashReportDialog/CrashReportViewerDialog
- **Backend Endpoint:** QDesktopServices::openUrl()
- **Data Flow:** User clicks Report Bug → Sanitize report → Build GitHub URL with query params → Open in browser

